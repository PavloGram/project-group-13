{"mappings":"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","sources":["src/myLibary.js","src/js/get_localstorage_info.js"],"sourcesContent":["import './js/spinner.js'\nimport './js/modal-team.js'\nimport './js/get_localstorage_info.js'\nimport './js/modal-about-movie.js'\n","import { renderMarkup } from './render-markup';\nimport axios from 'axios';\n\nconst STORAGE_KEY_WATCH = 'watched';\nconst STORAGE_KEY_QUEUE = 'queue';\nconst queueButton = document.querySelector('.js_queue');\nconst watchedButton = document.querySelector('.js_watched');\nconst galleryFilms = document.querySelector('.galleryFilms-js');\nconst nomoviesimages = document.querySelector('.start');\n\nclass ApiMovieSearch {\n  #API_KEY = '1962278b5026dd7c7bb0a91cd47f798b';\n\n  constructor() {\n    this.page = 1;\n  }\n\n  async fetchMovies(film_Id) {\n    try {\n      return await axios.get(\n        `https://api.themoviedb.org/3/movie/${film_Id}?api_key=${this.#API_KEY}`\n      );\n    } catch (err) {\n      throw new Error(err.message);\n    }\n  }\n}\n\nconst apiInfoMovies = new ApiMovieSearch();\n\nfunction handleGetWatchedFilms() {\n  galleryFilms.innerHTML = '';\n\n  const savedData = localStorage.getItem(STORAGE_KEY_WATCH);\n\n  const filmData = JSON.parse(savedData);\n\n  if (filmData.length === 0) {\n    nomoviesimages.classList.remove('is-hidden');\n  }\n\n  if (queueButton.classList.contains('is-active')) {\n    queueButton.classList.remove('is-active');\n  }\n  watchedButton.classList.add('is-active');\n  watchedButton.classList.add('btn-active');\n  queueButton.classList.remove('btn-active');\n\n  let datagenre_ids = [];\n  let films = {\n    results: [],\n  };\n\n  if (filmData) {\n    try {\n      filmData.map(id => {\n        apiInfoMovies\n          .fetchMovies(id)\n          .then(({ data }) => {\n            datagenre_ids = data.genres.map(genre => genre.id);\n            data.genre_ids = datagenre_ids;\n            data.genres.map(genre => data.genre_ids.push(genre.id));\n            films.results.push(data);\n          })\n          .catch(err => {\n            console.log(err);\n          })\n          .finally(() => renderMarkup(films));\n      });\n    } catch (error) {\n      console.error('Get state error: ', error.message);\n    }\n  }\n}\n\nfunction handleGetQueueFilms() {\n  galleryFilms.innerHTML = '';\n\n  const savedData = localStorage.getItem(STORAGE_KEY_QUEUE);\n  const filmData = JSON.parse(savedData);\n\n  if (filmData.length === 0) {\n    nomoviesimages.classList.remove('is-hidden');\n  }\n\n  if (watchedButton.classList.contains('is-active')) {\n    watchedButton.classList.remove('is-active');\n  }\n  queueButton.classList.add('is-active');\n  watchedButton.classList.remove('btn-active');\n  queueButton.classList.add('btn-active');\n\n  let datagenre_ids = [];\n  let films = {\n    results: [],\n  };\n\n  if (filmData) {\n    try {\n      filmData.map(id => {\n        apiInfoMovies\n          .fetchMovies(id)\n          .then(({ data }) => {\n            datagenre_ids = data.genres.map(genre => genre.id);\n            data.genre_ids = datagenre_ids;\n            data.genres.map(genre => data.genre_ids.push(genre.id));\n            films.results.push(data);\n            // console.log(films);\n          })\n          .catch(err => {\n            console.log(err);\n          })\n          .finally(() => renderMarkup(films));\n      });\n    } catch (error) {\n      console.error('Get state error: ', error.message);\n    }\n  }\n}\n\nwatchedButton.addEventListener('click', handleGetWatchedFilms);\nqueueButton.addEventListener('click', handleGetQueueFilms);\nwindow.addEventListener('load', handleGetWatchedFilms);\n\nconst addRemoveWatchedBtn = document.querySelector('.add-watched-btn');\nconst addRemoveQueueBtn = document.querySelector('.add-queue-btn');\n\naddRemoveWatchedBtn.addEventListener('click', showMenW);\naddRemoveQueueBtn.addEventListener('click', showMenQ);\n\nfunction showMenW() {\n  const savedDataLocal = localStorage.getItem(STORAGE_KEY_WATCH);\n  const filmDatalocal = JSON.parse(savedDataLocal);\n\n  if (filmDatalocal.length === 0) {\n    nomoviesimages.classList.remove('is-hidden');\n  }\n}\n\nfunction showMenQ() {\n  const savedDataLocal = localStorage.getItem(STORAGE_KEY_QUEUE);\n  const filmDatalocal = JSON.parse(savedDataLocal);\n\n  if (filmDatalocal.length === 0) {\n    nomoviesimages.classList.remove('is-hidden');\n  }\n}\n"],"names":["parcelRequire","$jkMrE","$a4db1495cff98d5c$var$queueButton","document","querySelector","$a4db1495cff98d5c$var$watchedButton","$a4db1495cff98d5c$var$galleryFilms","$a4db1495cff98d5c$var$nomoviesimages","$a4db1495cff98d5c$var$_API_KEY","WeakMap","$a4db1495cff98d5c$var$apiInfoMovies","async","film_Id","$2shzp","default","get","$parcel$interopDefault","this","err","Error","message","constructor","$g6yUq","page","$a4db1495cff98d5c$var$handleGetWatchedFilms","innerHTML","savedData","localStorage","getItem","filmData","JSON","parse","length","classList","remove","contains","add","datagenre_ids","films","results","map","id","fetchMovies","then","data","genres","genre","genre_ids","push","catch","console","log","finally","$5o68A","renderMarkup","error","addEventListener","window","$a4db1495cff98d5c$var$addRemoveWatchedBtn","$a4db1495cff98d5c$var$addRemoveQueueBtn","savedDataLocal"],"version":3,"file":"myLibary.5524cd68.js.map"}
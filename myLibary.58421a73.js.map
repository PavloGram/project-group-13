{"mappings":"iiBAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,2FAKME,EAAcC,SAASC,cAAc,aACrCC,EAAgBF,SAASC,cAAc,eACvCE,EAAeH,SAASC,cAAc,oBACtCG,EAAiBJ,SAASC,cAAc,UAI5CI,EAAQ,IAAAC,QAgBJC,EAAgB,IAAnB,W,sBAjBGC,I,aACJC,EAAAC,EAAA,CAAAC,KAAAN,EAAQ,C,kBAAG,qCAGTM,KAAKC,KAAO,C,iBAGRC,IAAA,c,MAAN,SAAkBC,G,kBAAlBL,EAAAX,EAAA,CAAAW,EAAAM,GAAAC,MAAA,SAAAC,I,2FAEmBC,EAAAC,QAAMC,IAAI,sCAAoCC,OAAEP,EAAQ,aAAyBO,OAAAZ,EAAAa,EAAA,CAAAC,EAARlB,K,+CAGxF,M,yBAAM,IAAImB,MAAMC,EAAAC,GAAIC,S,uDALxB,E,OAUC,IAGH,SAASC,IACDzB,EAAa0B,UAAY,GACzB,IAAMC,EAAYC,aAAaC,QA9Bb,WAgClB5B,EAAe6B,UAAUC,OAAO,aAE5BnC,EAAYkC,UAAUE,SAAS,cACnCpC,EAAYkC,UAAUC,OAAO,aAE7BhC,EAAc+B,UAAUG,IAAI,aAC5BlC,EAAc+B,UAAUG,IAAI,cAC5BrC,EAAYkC,UAAUC,OAAO,cAEjC,IAAIG,EAAQ,CACRC,QAAS,IAGT,GAAIR,EACA,IACiBS,KAAKC,MAAMV,GAEnBW,KAAI,SAACC,GACVnC,EACKoC,YAAYD,GACZE,MAAK,SAAAC,G,IAAGC,EAAID,EAAJC,KAEL1C,EAAe6B,UAAUG,IAAI,aAC7BU,EAAKC,UAAYD,EAAKE,OACtBX,EAAMC,QAAQW,KAAKH,IAGnB,EAAAI,EAAAC,cAAad,E,IAGhBe,OAAM,SAAAC,GACHC,QAAQC,IAAIF,E,OAI5B,MAAOG,GACHF,QAAQE,MAAM,oBAAqBA,EAAM7B,Q,EAsDrDzB,EAAcuD,iBAAiB,QAAS7B,GACxC7B,EAAY0D,iBAAiB,SAjD7B,WACItD,EAAa0B,UAAY,GAEzB,IAAMC,EAAYC,aAAaC,QA5ET,SA8EtB5B,EAAe6B,UAAUC,OAAO,aAE5BhC,EAAc+B,UAAUE,SAAS,cACjCjC,EAAc+B,UAAUC,OAAO,aAEnCnC,EAAYkC,UAAUG,IAAI,aAC1BlC,EAAc+B,UAAUC,OAAO,cAC/BnC,EAAYkC,UAAUG,IAAI,cAEtB,IAAIC,EAAQ,CACZC,QAAS,IAGb,GAAIR,EACA,IACqBS,KAAKC,MAAMV,GAGnBW,KAAI,SAACC,GACVnC,EACKoC,YAAYD,GACZE,MAAK,SAAAC,G,IAAGC,EAAID,EAAJC,KAEL1C,EAAe6B,UAAUG,IAAI,aAC7BU,EAAKC,UAAYD,EAAKE,OACtBX,EAAMC,QAAQW,KAAKH,IAGnB,EAAAI,EAAAC,cAAad,E,IAGhBe,OAAM,SAAAC,GACHC,QAAQC,IAAIF,E,OAI5B,MAAOG,GACHF,QAAQE,MAAM,oBAAqBA,EAAM7B,Q,KAQrD+B,OAAOD,iBAAiB,OAAQ7B,G","sources":["src/myLibary.js","src/js/get_localstorage_info.js"],"sourcesContent":["import './js/spinner.js'\nimport './js/modal-team.js'\nimport './js/get_localstorage_info.js'\nimport './js/modal-about-movie.js'","import { renderMarkup } from './render-markup';\nimport axios from 'axios';\n\nconst STORAGE_KEY_WATCH = 'watched';\nconst STORAGE_KEY_QUEUE = 'queue';\nconst queueButton = document.querySelector('.js_queue');\nconst watchedButton = document.querySelector('.js_watched');\nconst galleryFilms = document.querySelector('.galleryFilms-js');\nconst nomoviesimages = document.querySelector('.start');\n\n\nclass ApiMovieSearch {\n  #API_KEY = '1962278b5026dd7c7bb0a91cd47f798b';\n \n  constructor() {\n    this.page = 1;\n  }\n\n  async fetchMovies(film_Id) {\n    try {\n        return await axios.get(`https://api.themoviedb.org/3/movie/${film_Id}?api_key=${this.#API_KEY}`);\n        \n    } catch (err) {\n      throw new Error(err.message);\n    }\n  }\n}\n\nconst apiInfoMovies = new ApiMovieSearch ();\n\n\nfunction handleGetWatchedFilms() {\n        galleryFilms.innerHTML = \"\";\n        const savedData = localStorage.getItem(STORAGE_KEY_WATCH);\n\n        nomoviesimages.classList.remove('is-hidden');\n    \n        if (queueButton.classList.contains('is-active')) {\n        queueButton.classList.remove('is-active');\n        }\n        watchedButton.classList.add('is-active');\n        watchedButton.classList.add('btn-active');\n        queueButton.classList.remove('btn-active');\n    \n    let films = {\n        results: [],\n    };\n    \n        if (savedData) {\n            try {\n            const filmData = JSON.parse(savedData);\n            // console.log(filmData);\n            filmData.map((id) => {\n                apiInfoMovies\n                    .fetchMovies(id)\n                    .then(({ data }) => {\n                        // console.log(data);\n                        nomoviesimages.classList.add('is-hidden');\n                        data.genre_ids = data.genres;\n                        films.results.push(data);\n                        // console.log(films);\n                    \n                        renderMarkup(films); \n                    \n                        })                                 \n                    .catch(err => {\n                        console.log(err)\n                    })\n            })\n            }\n        catch (error) {\n            console.error(\"Get state error: \", error.message);\n            }\n        }        \n};\n\n\nfunction handleGetQueueFilms() {\n    galleryFilms.innerHTML = \"\";\n    \n    const savedData = localStorage.getItem(STORAGE_KEY_QUEUE);\n    \n    nomoviesimages.classList.remove('is-hidden');\n\n    if (watchedButton.classList.contains('is-active')) {\n        watchedButton.classList.remove('is-active');\n    }\n    queueButton.classList.add('is-active');\n    watchedButton.classList.remove('btn-active');\n    queueButton.classList.add('btn-active');\n\n        let films = {\n        results: [],\n    };\n\n    if (savedData) {\n        try {\n            const filmData = JSON.parse(savedData);\n            // console.log(filmData);\n            \n            filmData.map((id) => {\n                apiInfoMovies\n                    .fetchMovies(id)\n                    .then(({ data }) => {\n                        // console.log(data);\n                        nomoviesimages.classList.add('is-hidden');\n                        data.genre_ids = data.genres;\n                        films.results.push(data);\n                        // console.log(films);\n                    \n                        renderMarkup(films);\n                    \n                    })\n                    .catch(err => {\n                        console.log(err)\n                    })\n            })\n        }\n        catch (error) {\n            console.error(\"Get state error: \", error.message);\n    }\n        }   \n};\n\n\nwatchedButton.addEventListener('click', handleGetWatchedFilms);\nqueueButton.addEventListener('click', handleGetQueueFilms);\nwindow.addEventListener('load', handleGetWatchedFilms)"],"names":["parcelRequire","$bpxeT","$ee2debf4941c2c14$var$queueButton","document","querySelector","$ee2debf4941c2c14$var$watchedButton","$ee2debf4941c2c14$var$galleryFilms","$ee2debf4941c2c14$var$nomoviesimages","$ee2debf4941c2c14$var$_API_KEY","WeakMap","$ee2debf4941c2c14$var$apiInfoMovies","ApiMovieSearch","$parcel$interopDefault","$8MQK7","this","page","key","film_Id","$2TvXO","mark","_callee","$dIxxU","default","get","concat","$4KMWL","_this","Error","_ctx","t0","message","$ee2debf4941c2c14$var$handleGetWatchedFilms","innerHTML","savedData","localStorage","getItem","classList","remove","contains","add","films","results","JSON","parse","map","id","fetchMovies","then","param","data","genre_ids","genres","push","$7VSht","renderMarkup","catch","err","console","log","error","addEventListener","window"],"version":3,"file":"myLibary.58421a73.js.map"}